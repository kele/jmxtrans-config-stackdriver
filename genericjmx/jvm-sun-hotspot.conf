
<Plugin "java">
    JVMARG "-Djava.class.path=/usr/share/collectd/java/collectd-api.jar:/usr/share/collectd/java/generic-jmx.jar"
    LoadPlugin "org.collectd.java.GenericJMX"

    <Plugin "GenericJMX">

        <MBean "jvm_localhost_Threading">
            ObjectName "java.lang:type=Threading"
            InstancePrefix "jvm_localhost_Threading"
            
            <Value>
                Attribute "DaemonThreadCount"
                InstancePrefix "DaemonThreadCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "ThreadCount"
                InstancePrefix "ThreadCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "PeakThreadCount"
                InstancePrefix "PeakThreadCount"
                Type "gauge"
                Table false
            </Value>
        </MBean>


        <MBean "jvm_localhost_Memory">
            ObjectName "java.lang:type=Memory"
            InstancePrefix "jvm_localhost_Memory"
            
            <Value>
                Attribute "HeapMemoryUsage"
                InstancePrefix "HeapMemoryUsage"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "NonHeapMemoryUsage"
                InstancePrefix "NonHeapMemoryUsage"
                Type "gauge"
                Table false
            </Value>
        </MBean>


        <MBean "jvm_localhost_Runtime">
            ObjectName "java.lang:type=Runtime"
            InstancePrefix "jvm_localhost_Runtime"
            
            <Value>
                Attribute "Uptime"
                InstancePrefix "Uptime"
                Type "gauge"
                Table false
            </Value>
        </MBean>


        <MBean "jvm_localhost_os">
            ObjectName "java.lang:type=OperatingSystem"
            InstancePrefix "jvm_localhost_os"
            
            <Value>
                Attribute "CommittedVirtualMemorySize"
                InstancePrefix "CommittedVirtualMemorySize"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "FreePhysicalMemorySize"
                InstancePrefix "FreePhysicalMemorySize"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "FreeSwapSpaceSize"
                InstancePrefix "FreeSwapSpaceSize"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "OpenFileDescriptorCount"
                InstancePrefix "OpenFileDescriptorCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "ProcessCpuTime"
                InstancePrefix "ProcessCpuTime"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "SystemLoadAverage"
                InstancePrefix "SystemLoadAverage"
                Type "gauge"
                Table false
            </Value>
        </MBean>


        <MBean "jvm_localhost_gc">
            ObjectName "java.lang:type=GarbageCollector,name=*"
            InstancePrefix "jvm_localhost_gc"
            
            <Value>
                Attribute "CollectionCount"
                InstancePrefix "CollectionCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "CollectionTime"
                InstancePrefix "CollectionTime"
                Type "gauge"
                Table false
            </Value>
        </MBean>



        <Connection>
            Host "JMX_HOST"
            ServiceURL "service:jmx:rmi:///jndi/rmi://JMX_HOST:JMX_PORT/jmxrmi"

            Collect "jvm_localhost_Threading" 
            Collect "jvm_localhost_Memory" 
            Collect "jvm_localhost_Runtime" 
            Collect "jvm_localhost_os" 
            Collect "jvm_localhost_gc" 
        </Connection>
    </Plugin>
</Plugin>

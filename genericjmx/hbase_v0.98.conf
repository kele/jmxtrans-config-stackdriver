
<Plugin "java">
    JVMARG "-Djava.class.path=/usr/share/collectd/java/collectd-api.jar:/usr/share/collectd/java/generic-jmx.jar"
    LoadPlugin "org.collectd.java.GenericJMX"

    <Plugin "GenericJMX">

        <MBean "sdhbase_Master_Server">
            ObjectName "Hadoop:service=HBase,name=Master,sub=Server"
            InstancePrefix "sdhbase_Master_Server"
            
            <Value>
                Attribute "averageLoad"
                InstancePrefix "averageLoad"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "numRegionServers"
                InstancePrefix "numRegionServers"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "numDeadRegionServers"
                InstancePrefix "numDeadRegionServers"
                Type "gauge"
                Table false
            </Value>
        </MBean>


        <MBean "sdhbase_IPC_IPC">
            ObjectName "Hadoop:service=HBase,name=IPC,sub=IPC"
            InstancePrefix "sdhbase_IPC_IPC"
            
            <Value>
                Attribute "sentBytes"
                InstancePrefix "sentBytes"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "receivedBytes"
                InstancePrefix "receivedBytes"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "queueSize"
                InstancePrefix "queueSize"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "numOpenConnections"
                InstancePrefix "numOpenConnections"
                Type "gauge"
                Table false
            </Value>
        </MBean>


        <MBean "sdhbase_RegionServer_RegionServerStatistics">
            ObjectName "Hadoop:service=HBase,name=RegionServer,sub=Server"
            InstancePrefix "sdhbase_RegionServer_RegionServerStatistics"
            
            <Value>
                Attribute "blockCacheCount"
                InstancePrefix "blockCacheCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "blockCacheEvictionCount"
                InstancePrefix "blockCacheEvictionCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "blockCacheFreeSize"
                InstancePrefix "blockCacheFreeSize"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "blockCacheHitCount"
                InstancePrefix "blockCacheHitCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "blockCountHitPercent"
                InstancePrefix "blockCountHitPercent"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "blockCacheMissCount"
                InstancePrefix "blockCacheMissCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "blockCacheSize"
                InstancePrefix "blockCacheSize"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "compactionQueueLength"
                InstancePrefix "compactionQueueLength"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "flushQueueLength"
                InstancePrefix "flushQueueLength"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "memStoreSize"
                InstancePrefix "memStoreSize"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "storeCount"
                InstancePrefix "storeCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "readRequestCount"
                InstancePrefix "readRequestCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "storeFileIndexSize"
                InstancePrefix "storeFileIndexSize"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "writeRequestCount"
                InstancePrefix "writeRequestCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "totalRequestCount"
                InstancePrefix "totalRequestCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "slowAppendCount"
                InstancePrefix "slowAppendCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "slowPutCount"
                InstancePrefix "slowPutCount"
                Type "gauge"
                Table false
            </Value>
            <Value>
                Attribute "slowGetCount"
                InstancePrefix "slowGetCount"
                Type "gauge"
                Table false
            </Value>
        </MBean>



        <Connection>
            Host "HBASE_JMX_HOST"
            ServiceURL "service:jmx:rmi:///jndi/rmi://HBASE_JMX_HOST:HBASE_JMX_PORT/jmxrmi"

            Collect "sdhbase_Master_Server" 
            Collect "sdhbase_IPC_IPC" 
            Collect "sdhbase_RegionServer_RegionServerStatistics" 
        </Connection>
    </Plugin>
</Plugin>
